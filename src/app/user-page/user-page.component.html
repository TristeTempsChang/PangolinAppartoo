<header>
    <div class="headerborder">
        <div class="headerTop">
            <div class="menuBrand">
                <img [src]="logoUrl" class="logoPangolin" alt="logoPangolin"/>
                <h3 style="margin-left: 20px;">Pangolin</h3>
            </div>
            <div class="menu">
                <div class="itemUser">
                    <a routerLink="findFriend" style="border-right: solid 2px rgb(134, 134, 134); padding-right: 2rem; text-decoration: none; color: white;">Trouver des pangolins</a>
                        <p-overlayPanel #op>
                            <ng-container *ngIf="notifService.showNotification">
                                <p>Ajout en ami effectué avec succès !</p>
                              </ng-container>
                              <ng-container *ngIf="!notifService.showNotification">
                                <p>Vous n'avez aucune notification pour l'instant...</p>
                              </ng-container>
                        </p-overlayPanel>
                        <i class="pi pi-bell text-3xl" (click)="op.toggle($event)" *ngIf="notifService.showNotification" style="margin: 0 1.2rem 0; font-size: 1rem;" pBadge></i>
                        <i class="pi pi-bell text-3xl" (click)="op.toggle($event)" *ngIf="!notifService.showNotification" style="margin: 0 1.2rem 0; font-size: 1rem;"></i>
                    </div>
                <div class="user">
                    <p-avatar icon="pi pi-user" shape="circle" style="margin: 0 1.2rem 0;" styleClass="mr-2"></p-avatar>
                    <p style="margin-right: 20px;">{{username}}</p>
                    <i class="pi pi-sign-out" style="cursor: pointer;" (click)="deconnexion()"></i>
                </div>
            </div>
        </div>
        <div class="texteBienvenue">
            <h1 style="font-size: 3rem;">Bonjour {{username}}</h1>
            <p>C'est ta page utilisateur, ici tu peux ajouter des contacts, modifer tes informations et même ton statut !</p>
            <br />
            <br />
            <br />
            <a routerLink="editUser" id="compte">
                Éditer mon profil
            </a>
        </div>
    </div>
</header>
<div class="blocDataUser">
    <p-panel header="Mes informations">
        <div class="userInformation">
            <p style="color: rgb(155, 155, 155)">Information utilisateur</p>
            <div class="ensembleInput">
                <div class="first">
                    <div class="inputUser">
                        <label for="username" style="font-weight: bold; color: grey;">Username</label>
                        <br />
                        <input class="inputAll" [(ngModel)]="username" pInputText [disabled]="true" style="margin-top: 10px;" name="username">
                    </div>
                    <div class="inputUser">
                        <label for="email" style="font-weight: bold; color: #808080;">Adresse e-mail</label>
                        <br />
                        <input class="inputAll" pInputText [(ngModel)]="email" [disabled]="true" style="margin-top: 10px;" name="email">
                    </div>
                </div>
                <br />
                <div class="first">
                    <div class="inputUser">
                        <label for="lastmane" style="font-weight: bold; color: grey;">Prénom</label>
                        <br />
                        <input pInputText class="inputAll" [(ngModel)]="prenom" [disabled]="true" style="margin-top: 10px;" name="lastname">
                    </div>
                    <div class="inputUser">
                        <label for="firstname" style="font-weight: bold; color: grey;">Nom</label>
                        <br />
                        <input pInputText [disabled]="true" [(ngModel)]="nom" class="inputAll" style="margin-top: 10px;" name="firstname">
                    </div>
                </div>
            </div>
        </div>
        <div class="userInformation">
            <p style="color: rgb(155, 155, 155)">Informations de contact</p>
            <div class="ensembleInput">
                <div class="inputUser">
                    <label for="adresse" style="font-weight: bold; color: grey;">Adresse</label>
                    <br />
                    <input class="inputAdresse" pInputText [(ngModel)]="adresse" [disabled]="true" style="margin-top: 10px;" name="adresse">
                </div>
                <br />
                <div class="first">
                    <div class="inputUser">
                        <label for="username" style="font-weight: bold; color: grey;">Ville</label>
                        <br />
                        <input pInputText [disabled]="true" [(ngModel)]="ville" style="margin-top: 10px;" class="inputAll" name="username">
                    </div>
                    <div class="inputUser">
                        <label for="email" style="font-weight: bold; color: grey;">Pays</label>
                        <br />
                        <input pInputText [disabled]="true" [(ngModel)]="pays" style="margin-top: 10px;" name="email" class="inputAll">
                    </div>
                    <div class="inputUser">
                        <label for="email" style="font-weight: bold; color: grey;">Code postal</label>
                        <br />
                        <input pInputText [disabled]="true" [(ngModel)]="codePostal" style="margin-top: 10px;" name="email">
                    </div>
                </div>
            </div>
        </div>
        <div class="userInformation">
            <p style="color: rgb(155, 155, 155)">A propos de moi</p>
            <div class="ensembleInput">
                <textarea rows="5" cols="110" pInputTextarea [(ngModel)]="bio" [disabled]="true"></textarea>
            </div>
        </div>
    </p-panel>
    <p-card>
        <div class="EnsembleFicheUser">
            <p-avatar icon="pi pi-user" class="custom-avatar" size="xlarge" shape="circle"></p-avatar>
            <br />
            <br />
            <div>
                <p>{{friends.length}}</p>
                <p style="color: rgb(155, 155, 155); cursor: pointer;" (click)="showFriend()">Pangolins</p>
            </div>
            <br />
            <p style="font-size: 1.2rem;">
                <strong>{{username}}</strong>
            </p>
            <div>
                <p-overlayPanel #stat>
                    <ng-template pTemplate="content">
                        <p-chip (click)="guerrier()">
                            <div style="padding: 3px; cursor: pointer;">Guerrier</div>
                        </p-chip>
                        <p-chip (click)="Alchimiste()">
                            <div style="padding: 3px; cursor: pointer;">Alchimiste</div>
                        </p-chip>
                        <p-chip (click)="Sorcier()">
                            <div style="padding: 3px; cursor: pointer;">Sorcier</div>
                        </p-chip>
                        <p-chip (click)="Espions()">
                            <div style="padding: 3px; cursor: pointer;">Espions</div>
                        </p-chip>
                        <p-chip (click)="Enchanteur()">
                            <div style="padding: 3px; cursor: pointer;">Enchanteur</div>
                        </p-chip>
                    </ng-template>
                </p-overlayPanel>
                <p-chip (click)="stat.toggle($event)" style="cursor: pointer;">
                    <div style="padding: 3px;">{{status}}</div>
                </p-chip>
            </div>
        </div>
    </p-card>
</div>
<footer class="footer-distributed">
    <div class="footer-left">
        <p class="footer-links">
            <a class="link-1" href="#">Mon profil</a>
            <a href="#">Trouver des pangolins</a>
            <a href="https://tristanfolio.bot-creator.com/">Réalisation TRAN Tristan</a>
        </p>
        <p>Pangolin &copy; {{footerDate | date: 'yyyy'}}</p>
    </div>
</footer>

<p-dialog header="Pangolins" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
    <p-dataView #dv [value]="userData" [rows]="5" [paginator]="true">
        <ng-template pTemplate="header">
            <div class="headerEnsemble">

                <div class="ensembleBtnHeader">
                    
                </div>
            </div>
        </ng-template>
        <ng-template let-user pTemplate="listItem">
            <div class="col-12">
                <div class="ensembleBlocList">
                    <div class="ensembleBlocInfo">
                        <p-avatar icon="pi pi-user" class="custom-avatar" size="xlarge" shape="circle"></p-avatar>
                        <div class="emsembleTexte">
                            <div style="font-size: 1.5rem; font-weight: 700; color: black;">{{ user.username }}</div>
                            <div>
                                <p-chip>
                                    <div style="padding: 3px;">{{user.status}}</div>
                                </p-chip>
                            </div>
                            <span>{{truncateText(user.bio, 50)}}</span>
                        </div>
                    </div>
                        <div class="ensembleFooter">
                            <div class="ensembleBtn">
                                <div style="font-size: 1rem; font-weight: 700;">Supprimer de la liste d'ami</div>
                                <button (click)="deleteFriend(user._id)" style="background-color: red; border: 1px solid red;" pButton icon="pi pi-user-plus"></button>
                            </div>
                        </div>
                    </div>
                </div>
        </ng-template>
    </p-dataView>
</p-dialog>